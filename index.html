<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Himalaya: The Great Dream</title>
    <style>
        :root { --gold: #FFD700; --neon: #00f2ff; }
        * { box-sizing: border-box; touch-action: none; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #050505; font-family: 'Segoe UI', sans-serif; }
        
        #hud { position: fixed; top: 15px; width: 100%; display: flex; justify-content: space-around; z-index: 1000; pointer-events: none; }
        .stat-box { background: rgba(0,0,0,0.8); border: 1px solid var(--gold); color: white; padding: 8px 20px; border-radius: 50px; font-weight: bold; backdrop-filter: blur(5px); }
        
        #overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; display: flex; align-items: center; justify-content: center; transition: 0.5s; }
        .royal-card { border: 2px solid var(--gold); padding: 50px; border-radius: 40px; text-align: center; color: white; background: radial-gradient(circle, #1a1a1a, #000); box-shadow: 0 0 50px rgba(255,215,0,0.2); }
        .btn-play { background: var(--gold); color: black; border: none; padding: 15px 60px; font-size: 26px; font-weight: bold; border-radius: 50px; cursor: pointer; margin-top: 30px; box-shadow: 0 5px 20px rgba(255,215,0,0.4); }

        canvas { display: block; filter: contrast(1.2) brightness(1.1); }
    </style>
</head>
<body>

<div id="hud">
    <div class="stat-box">ğŸ’° <span id="c-val">520</span></div>
    <div class="stat-box">ğŸ”± Ø§Ù„Ù…Ø±Ø­Ù„Ø© <span id="s-val">1</span></div>
    <div class="stat-box">â¤ï¸ <span id="l-val">â¤ï¸â¤ï¸â¤ï¸</span></div>
</div>

<div id="overlay">
    <div class="royal-card">
        <h1 style="color:var(--gold); font-size: 40px;">Ø­Ù„Ù… Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© ğŸ¾</h1>
        <p>Ù„Ø§ Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ† ØµØºØ§Ø± Ù‡Ù†Ø§.. ÙÙ‚Ø· ÙƒÙˆØ¯ ÙŠØªØ­Ø¯Ù‰ Ø§Ù„Ø®ÙŠØ§Ù„.</p>
        <button class="btn-play" onclick="ignite()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ù„Ø­Ù…Ø© ğŸ”¥</button>
    </div>
</div>

<script>
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');
document.body.appendChild(canvas);

// --- Ù…Ø­Ø±Ùƒ Ø§Ù„ØµÙˆØª (Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© Ù„Ù…Ø§Ø±ÙŠÙˆ) ---
const audio = new (window.AudioContext || window.webkitAudioContext)();
function playSFX(f1, f2, d) {
    if(audio.state === 'suspended') audio.resume();
    const o = audio.createOscillator(); const g = audio.createGain();
    o.connect(g); g.connect(audio.destination);
    o.frequency.setValueAtTime(f1, audio.currentTime);
    o.frequency.exponentialRampToValueAtTime(f2, audio.currentTime + d);
    g.gain.exponentialRampToValueAtTime(0.01, audio.currentTime + d);
    o.start(); o.stop(audio.currentTime + d);
}

// --- Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© (Vector) Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø¸Ù‡ÙˆØ± Ø¯Ø±Ø§Ø¬Ø§Øª ---
const draw = {
    cat(x, y, s, rage) {
        ctx.save();
        if(rage) { ctx.shadowBlur = 20; ctx.shadowColor = "gold"; ctx.filter = "brightness(1.5)"; }
        ctx.fillStyle = "#fff"; // Ø¬Ø³Ù… Ø§Ù„Ù‚Ø·Ø©
        ctx.beginPath(); ctx.ellipse(x+s/2, y+s/2, s/2, s/3, 0, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.arc(x+s*0.8, y+s/3, s/4, 0, Math.PI*2); ctx.fill(); // Ø±Ø£Ø³
        ctx.fillStyle = "#000"; ctx.fillRect(x+s*0.85, y+s/4, 4, 4); // Ø¹ÙŠÙ†
        ctx.restore();
    },
    monster(x, y, s, type) {
        ctx.save();
        ctx.fillStyle = type === 20 ? "#ff0000" : "#5500ff";
        ctx.shadowBlur = 15; ctx.shadowColor = ctx.fillStyle;
        // Ø±Ø³Ù… ÙˆØ­Ø´ Ù‡Ù†Ø¯Ø³ÙŠ Ù…Ø®ÙŠÙ
        ctx.beginPath();
        for(let i=0; i<6; i++) {
            let ang = (i/6) * Math.PI * 2 + Date.now()*0.005;
            let r = s/2 + Math.sin(Date.now()*0.01)*10;
            ctx.lineTo(x+s/2 + Math.cos(ang)*r, y+s/2 + Math.sin(ang)*r);
        }
        ctx.closePath(); ctx.fill();
        ctx.fillStyle = "#fff"; ctx.fillRect(x+s/3, y+s/3, 8, 8); ctx.fillRect(x+s*0.6, y+s/3, 8, 8);
        ctx.restore();
    }
};

let game = { active: false, stage: 1, coins: 520, lives: 3, dist: 0, target: 4000 };
let player = { x: 0, y: 0, v: 0, g: 0.48, j: -9.5, s: 75 };
let entities = { monsters: [], coins: [], particles: [] };

function resize() {
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    player.x = canvas.width * 0.15;
}
window.onresize = resize; resize();

function ignite() {
    game.active = true; game.dist = 0; game.lives = 3;
    entities = { monsters: [], coins: [], particles: [] };
    player.y = canvas.height/2;
    document.getElementById('overlay').style.opacity = 0;
    setTimeout(() => document.getElementById('overlay').style.display = 'none', 500);
    loop();
}

function loop() {
    if(!game.active) return;
    
    // Ø®Ù„ÙÙŠØ© "Ø§Ù„Ø¹Ù…Ù‚"
    let grd = ctx.createLinearGradient(0,0,0,canvas.height);
    grd.addColorStop(0, "#050510"); grd.addColorStop(1, "#100510");
    ctx.fillStyle = grd; ctx.fillRect(0,0,canvas.width, canvas.height);

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø§Ø¹Ø¨
    player.v += player.g; player.y += player.v;
    if(player.y > canvas.height - player.s) player.y = canvas.height - player.s;
    if(player.y < 0) { player.y = 0; player.v = 0; }
    
    draw.cat(player.x, player.y, player.s, (game.dist%100 < 20));

    // Ø§Ù„ÙˆØ­ÙˆØ´ (Ø¨Ø¯ÙˆÙ† ØµÙˆØ± Ø®Ø§Ø±Ø¬ÙŠØ©!)
    if(Math.random() < 0.015 + (game.stage*0.002)) {
        entities.monsters.push({ x: canvas.width, y: Math.random()*(canvas.height-80), s: 80+(game.stage*2), spd: 6+(game.stage*0.5) });
    }
    entities.monsters.forEach((m, i) => {
        m.x -= m.spd;
        draw.monster(m.x, m.y, m.s, game.stage);
        if(Math.hypot(player.x+player.s/2 - (m.x+m.s/2), player.y+player.s/2 - (m.y+m.s/2)) < 60) {
            game.lives--; entities.monsters.splice(i,1);
            playSFX(100, 10, 0.3);
            if(game.lives <= 0) resetGame();
        }
    });

    // Ø§Ù„Ø°Ù‡Ø¨ (ØµÙˆØª Ù…Ø§Ø±ÙŠÙˆ)
    if(Math.random() < 0.03) entities.coins.push({ x: canvas.width, y: Math.random()*(canvas.height-40) });
    entities.coins.forEach((c, i) => {
        c.x -= 5;
        ctx.fillStyle = "gold"; ctx.beginPath(); ctx.arc(c.x, c.y, 15, 0, Math.PI*2); ctx.fill();
        if(Math.hypot(player.x+player.s/2 - c.x, player.y+player.s/2 - c.y) < 45) {
            game.coins += 10; playSFX(987, 1318, 0.2); entities.coins.splice(i, 1);
        }
    });

    game.dist += 5;
    if(game.dist > game.target) { game.stage++; game.target += 2000; }
    
    updateHUD();
    requestAnimationFrame(loop);
}

function updateHUD() {
    document.getElementById('c-val').innerText = game.coins;
    document.getElementById('s-val').innerText = game.stage;
    document.getElementById('l-val').innerText = "â¤ï¸".repeat(game.lives);
}

function resetGame() {
    game.active = false;
    document.getElementById('overlay').style.display = 'flex';
    document.getElementById('overlay').style.opacity = 1;
    document.querySelector('h1').innerText = "Ø¹Ø¯ Ù…Ù† Ø¬Ø¯ÙŠØ¯ ÙŠØ§ Ù…Ù„Ùƒ ğŸ”±";
}

window.onmousedown = () => { if(game.active) { player.v = player.j; playSFX(200, 600, 0.1); } };
window.ontouchstart = (e) => { e.preventDefault(); if(game.active) { player.v = player.j; playSFX(200, 600, 0.1); } };
</script>
</body>
</html>